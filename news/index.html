<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Changelog • macpan2</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Changelog"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">macpan2</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.7.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/quickstart.html">Quickstart</a></li>
    <li><a class="dropdown-item" href="../articles/example_models.html">Example Models</a></li>
    <li><a class="dropdown-item" href="../articles/calibration.html">Calibrating Compartmental Models to Data</a></li>
    <li><a class="dropdown-item" href="../articles/real_data.html">Fitting to Real Data</a></li>
    <li><a class="dropdown-item" href="../articles/state_updaters.html">ODE Solvers, Process Error, and Difference Equations</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><a class="dropdown-item" href="../articles/index.html">More articles...</a></li>
  </ul></li>
<li class="active nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/canmod/macpan2/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-news">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Changelog</h1>
      <small>Source: <a href="https://github.com/canmod/macpan2/blob/main/NEWS.md" class="external-link"><code>NEWS.md</code></a></small>
    </div>

    <div class="section level2">
<h2 class="pkg-version" data-toc-text="1.5.0" id="macpan2-150-news-for-this-version-is-in-progress">macpan2 1.5.0 (news for this version is in-progress)<a class="anchor" aria-label="anchor" href="#macpan2-150-news-for-this-version-is-in-progress"></a></h2>
<div class="section level3">
<h3 id="new-features-1-5-0">New Features<a class="anchor" aria-label="anchor" href="#new-features-1-5-0"></a></h3>
<ul><li>Delete elements from model specifications with <code>mp_tmb_delete</code>.</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="1.4.0" id="macpan2-140-news-for-this-version-is-in-progress">macpan2 1.4.0 (news for this version is in-progress)<a class="anchor" aria-label="anchor" href="#macpan2-140-news-for-this-version-is-in-progress"></a></h2>
<div class="section level3">
<h3 id="breaking-changes-1-4-0">Breaking Changes<a class="anchor" aria-label="anchor" href="#breaking-changes-1-4-0"></a></h3>
<ul><li>Repeated calls of an optimizer now start from the previous best parameter vector</li>
<li>No longer fit full covariance matrix in <code>sdreport</code>s</li>
</ul></div>
<div class="section level3">
<h3 id="bug-fixes-1-4-0">Bug Fixes<a class="anchor" aria-label="anchor" href="#bug-fixes-1-4-0"></a></h3>
<ul><li>Row vectors with names no longer break spec print methods</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="1.3.0" id="macpan2-130">macpan2 1.3.0<a class="anchor" aria-label="anchor" href="#macpan2-130"></a></h2>
<div class="section level3">
<h3 id="breaking-changes-1-3-0">Breaking Changes<a class="anchor" aria-label="anchor" href="#breaking-changes-1-3-0"></a></h3>
<ul><li>No longer exporting <code>nlist</code>.</li>
<li>Removing in-place modifications to model specification objects in <code>mp_tmb_insert</code> and <code>mp_tmb_update</code>.</li>
</ul></div>
<div class="section level3">
<h3 id="new-features-1-3-0">New Features<a class="anchor" aria-label="anchor" href="#new-features-1-3-0"></a></h3>
<ul><li>Define explicit state variable updates, with the choice of applying <code>mp_euler</code>, <code>mp_rk4</code>, or <code>mp_euler_multinomial</code> update methods, the latter generating process error.</li>
<li>New stochasticity engine functions <code>rbinom</code> and <code>reulermultinom</code>.</li>
<li>
<code>mp_tmb_fixef_cov</code> function for getting the covariance matrix of fixed effects.</li>
<li>
<code>mp_trajectory_ensemble</code> and <code>mp_trajectory_sim</code> functions for summarizing random variation in trajectories.</li>
<li>Unpacking assignment in the engine. This means that you can do things like <code>c(x, y) ~ z</code>, where the values in <code>z</code> are assigned to elements in <code>x</code>, <code>y</code>, etc… in row-major order.</li>
<li>
<code>to_name_pairs</code> function for returning all pairwise dot-concatenations of the elements of a character vector without dots.</li>
<li>
<code>to_values</code> function for extracting the column from a data frame with only a single numerical column and turning numeric matrices and arrays with dimnames into a flattened numeric vector with labels produced by appropriately dot-concatenating the dimnames.</li>
</ul></div>
<div class="section level3">
<h3 id="bug-fixes-1-3-0">Bug Fixes<a class="anchor" aria-label="anchor" href="#bug-fixes-1-3-0"></a></h3>
<ul><li>Several bugs related to input handling in <code>mp_tmb_calibrator</code> (<a href="https://github.com/canmod/macpan2/issues/176" class="external-link">#176</a>)</li>
</ul></div>
<div class="section level3">
<h3 id="doc-fixes-and-updates-1-3-0">Doc Fixes and Updates<a class="anchor" aria-label="anchor" href="#doc-fixes-and-updates-1-3-0"></a></h3>
<ul><li>New installation instructions for installing from <code>r-universe</code>.</li>
<li>New vignette: <code>real_data</code>.</li>
<li>Document <code>to_name</code>, <code>to_names</code>, <code>to_labels</code>, which handle naming of structured objects.</li>
<li>Document <code>print</code> function in the <code><a href="../reference/engine_functions.html">?engine_functions</a></code>.</li>
<li>
<code>simple_sims</code> example in <code><a href="../reference/engine_functions.html">?engine_functions</a></code> now runs without error.</li>
<li>Help file examples for <code>mp_tmb_insert</code> and <code>mp_tmb_update</code>.</li>
<li>Readme/vignette examples better expose calls to <code>library</code> for the user.</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="1.1.0" id="macpan2-110">macpan2 1.1.0<a class="anchor" aria-label="anchor" href="#macpan2-110"></a></h2>
<div class="section level3">
<h3 id="breaking-changes-1-1-0">Breaking Changes<a class="anchor" aria-label="anchor" href="#breaking-changes-1-1-0"></a></h3>
<ul><li>
<code>simple_sims</code> no longer returns outputs for the zeroth time-step.</li>
<li>Using <code>last.par.best</code> to finalize the TMB objective function following optimization.</li>
<li>
<code>group_sums</code> now checks for bad group indexes.</li>
<li>
<code>rbind_lag</code> now throws an error when <code>lag &gt; 1</code> because there are conceptual errors with this case. We will get back to this when we can to allow these important cases by adding an argument with initial conditions associated with negative time steps.</li>
</ul></div>
<div class="section level3">
<h3 id="new-features-1-1-0">New Features<a class="anchor" aria-label="anchor" href="#new-features-1-1-0"></a></h3>
<ul><li>Streamlined installation via <code>r-universe</code>.</li>
<li>
<code>mp_tmb_calibrator</code> and <code>mp_tmb_optimize</code> functions for calibration using a simple and restrictive trajectory matching model. Future releases will allow more functionality.</li>
<li>
<code>mp_tmb_coef</code> and <code>mp_tmbstan_coef</code> for tables of statistical parameters used in calibration.</li>
<li>
<code>mp_trajectory_sd</code> and <code>mp_trajectory_ensemble</code> for getting information about fitted trajectory uncertainty.</li>
<li>
<code>mp_tmb_update|insert</code> functions for creating new model specs from existing ones.</li>
<li>Parameters specified as a data frame can now place default values in columns with any of the following names: <code>"default", "Default", "value", "Value", "val", "Val"</code>
</li>
<li>
<code>mp_tmb_library</code> can return a list of model specs with <code>alternative_specs</code>, if the model makes alternatives available.</li>
<li>
<code>time_var</code> engine function is better than the old <code>time_group</code>, which required two expressions rather than one to do the same thing. <code>time_group</code> will remain but is softly deprecated.</li>
<li>Fixed effects extractor and formatter.</li>
<li>
<code>mp_default</code> function for extracting spec and simulator defaults in long-format.</li>
<li>
<code>rbind_time</code> allows integer vectors for subsetting times</li>
<li>
<code>options(macpan2_verbose = FALSE)</code> will turn off the flood of information provided by <code>TMB</code>. Note that this only takes effect if set before creating a TMB simulator.</li>
</ul></div>
<div class="section level3">
<h3 id="bug-fixes-1-1-0">Bug Fixes<a class="anchor" aria-label="anchor" href="#bug-fixes-1-1-0"></a></h3>
<ul><li>Segfaults for out-of-range assignment.</li>
</ul></div>
<div class="section level3">
<h3 id="doc-fixes-and-updates-1-1-0">Doc Fixes and Updates<a class="anchor" aria-label="anchor" href="#doc-fixes-and-updates-1-1-0"></a></h3>
<ul><li>(in progress) <a href="https://github.com/canmod/macpan2/blob/HEAD/vignettes/calibration.Rmd" class="external-link">Calibration vignette</a> is updated to be a simpler quick-start, and previous advanced material is moved to an advanced vignette.</li>
<li>
<code>mp_tmb_model_spec</code> documentation is filled out.</li>
<li>
<code>group_sums</code> TMB engine function third argument updated from old pre-1.0.0 behaviour.</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="1.0.0" id="macpan2-100">macpan2 1.0.0<a class="anchor" aria-label="anchor" href="#macpan2-100"></a></h2>
<div class="section level3">
<h3 id="breaking-changes-1-0-0">Breaking Changes<a class="anchor" aria-label="anchor" href="#breaking-changes-1-0-0"></a></h3>
<ul><li>No more <code>flows.csv</code>, <code>derivations.json</code> files in the library, and instead <code>tmb.R</code> files.</li>
<li>No more <code>Compartmental</code> function, and instead <code>mp_tmb_model_spec</code> and <code>mp_tmb_library</code>.</li>
<li>
<code>{group|row|col}Sums</code> are now called <code>{group|row|col}_sums</code>.</li>
<li>Final argument of <code>group_sums</code> used to be the length of the output vector, but now it is a vector of the desired output length.</li>
<li>
<code>TMBModel</code> and associated classes (<code>ExprList</code>) are no longer exported, in favour of <code>mp_...</code> functions for doing similar things.</li>
<li>Sort simulation output by time step.</li>
</ul></div>
<div class="section level3">
<h3 id="new-features-1-0-0">New Features<a class="anchor" aria-label="anchor" href="#new-features-1-0-0"></a></h3>
<ul><li>Constant integer vectors can now be passed to <code>C++</code>.</li>
<li>Integer vectors can be used to subset assignment matrices (i.e. integer subsetting on the left-hand-side).</li>
<li>
<code><a href="../reference/mp_trajectory.html">mp_trajectory()</a></code> function, which is roughly equivalent to <code>model$report(..., .phases = "during")</code>.</li>
<li>New <code>print</code> function in the TMB engine.</li>
<li>No need to declare empty matrices when creating TMB model objects, and matrices that are derived are automatically detected.</li>
</ul></div>
<div class="section level3">
<h3 id="experimental-features-1-0-0">Experimental Features<a class="anchor" aria-label="anchor" href="#experimental-features-1-0-0"></a></h3>
<ul><li>Model structure grammar (<code><a href="../reference/mp_index.html">mp_index()</a></code>, <code><a href="../reference/mp_join.html">mp_join()</a></code>, etc.)</li>
<li>Log files</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.0.3" id="macpan2-003">macpan2 0.0.3<a class="anchor" aria-label="anchor" href="#macpan2-003"></a></h2>
<ul><li>Optimize C++ simulation history storage by avoiding unnecessary allocations</li>
<li>Use state and flow names in expression inserters</li>
<li>Chattier validity checking</li>
<li>Radial basis functions</li>
<li>New starter models (thanks <a href="https://github.com/mayaearn" class="external-link">@mayaearn</a> and <a href="https://github.com/Flynn-Primrose" class="external-link">@Flynn-Primrose</a> )
<ul><li>
<code>macpan-base</code> – re-implementation of the McMaster group’s COVID-19 model in <code>macpan2</code>
</li>
<li>
<code>ww</code> – wastewater model (doesn’t yet have a readme)</li>
<li>new readme for and clean up of previous models</li>
</ul></li>
<li>Report what expression broke on the C++ side</li>
<li>Developer tools for switching between different C++ files and working directories</li>
<li>Package reference organization cleanup (thanks <a href="https://github.com/bbolker" class="external-link">@bbolker</a> )</li>
<li>Time-varying parameters vignette</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.0.2" id="macpan2-002">macpan2 0.0.2<a class="anchor" aria-label="anchor" href="#macpan2-002"></a></h2>
<ul><li>Interface for optimization of TMB simulation objects</li>
<li>TMB simulation model updating with caching</li>
<li>Parameter transformations</li>
<li>Get initial values of matrices in TMB simulation objects</li>
<li>State and flow variable names can be used in expressions in some contexts</li>
<li>Example model indexing (thank you <a href="https://github.com/bbolker" class="external-link">@bbolker</a>!)</li>
<li>Engine function rbind_time defaults to row binding the full simulation history</li>
<li>Fix bug when the entire model has no inflows or no outflows</li>
<li>Fix bugs in symbolic R-side manipulation of expressions</li>
<li>Fix previously broken argument_dots option in model definition files (thank you <a href="https://github.com/Flynn-Primrose" class="external-link">@Flynn-Primrose</a> )</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.0.1" id="macpan2-001">macpan2 0.0.1<a class="anchor" aria-label="anchor" href="#macpan2-001"></a></h2>
<ul><li>Initial release.</li>
</ul></div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Steve Walker, Weiguang Guan, Ben Bolker, Jen Freeman, Darren Flynn-Primrose.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

    </footer></div>





  </body></html>

