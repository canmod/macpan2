<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="macpan2">
<title>Quickstart Guide: Runge Kutta and model products • macpan2</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Quickstart Guide: Runge Kutta and model products">
<meta property="og:description" content="macpan2">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">macpan2</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.3</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/quickstart.html">Quickstart Guide: specifying and simulating a simple compartmental model</a>
    <a class="dropdown-item" href="../articles/quickstart2.html">Quickstart Guide, part 2: specifying and simulating a structured compartmental model</a>
    <a class="dropdown-item" href="../articles/quickstart_products.html">Quickstart Guide: Runge Kutta and model products</a>
    <a class="dropdown-item" href="../articles/time_varying_parameters.html">Specifying Time-Varying Parameters</a>
    <a class="dropdown-item" href="../articles/calibration.html">Calibrating Compartmental Models to Data</a>
    <a class="dropdown-item" href="../articles/example_models.html">Example Models</a>
    <a class="dropdown-item" href="../articles/flow_types.html">Flow Types</a>
    <div class="dropdown-divider"></div>
    <a class="dropdown-item" href="../articles/index.html">More articles...</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/canmod/macpan2/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Quickstart Guide: Runge Kutta and model products</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/canmod/macpan2/blob/HEAD/vignettes/quickstart_products.Rmd" class="external-link"><code>vignettes/quickstart_products.Rmd</code></a></small>
      <div class="d-none name"><code>quickstart_products.Rmd</code></div>
    </div>

    
    
<p><a href="https://canmod.github.io/macpan2/articles/vignette-status#working-draft"><img src="https://img.shields.io/badge/status-working%20draft-red" alt="status"></a></p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">epi_dir</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"starter_models"</span>, <span class="st">"product_example"</span>, <span class="st">"Epi_model"</span>, package <span class="op">=</span> <span class="st">"macpan2"</span><span class="op">)</span></span>
<span><span class="va">age_dir</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"starter_models"</span>, <span class="st">"product_example"</span>, <span class="st">"Age_model"</span>, package <span class="op">=</span> <span class="st">"macpan2"</span><span class="op">)</span></span></code></pre></div>
<p>Model definition directories can be converted directly into
simulators using the “SimulatorConstructor” function. When using this
function users must input the usual arguments for creating a simulator
(e.g. state, flow, parameters) as well as “per_capita_transmission” a
matrix with a number of columns equal to the number of infectious
compartments and a number of rows equal to the number of infectious
flows. The “per_capita_transmission” matrix can either be filled
directly with numerical values or it can be created as an “empty_matrix”
and computed via expressions in the “derivations.R” file.</p>
<p>The SimulatorConstructor function can create simulators that use one
of two different integration methods, the specific method is set using
the “integration_method” argument. The defult option is “RK4” which
denotes the Runge-Kutta 4 algorithm, to use Eulers method set
“integration_method = Euler”.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">epi_rk4</span> <span class="op">=</span> <span class="fu"><a href="../reference/SimulatorConstructor.html">SimulatorConstructor</a></span><span class="op">(</span><span class="va">epi_dir</span>,</span>
<span>                               time_steps <span class="op">=</span> <span class="fl">25L</span>,</span>
<span>                               state <span class="op">=</span> <span class="fu"><a href="../reference/engine_functions.html">c</a></span><span class="op">(</span>S <span class="op">=</span> <span class="fl">999</span>, E <span class="op">=</span> <span class="fl">1</span>, I <span class="op">=</span> <span class="fl">0</span>, R <span class="op">=</span> <span class="fl">0</span><span class="op">)</span>,</span>
<span>                               flow <span class="op">=</span> <span class="fu"><a href="../reference/engine_functions.html">c</a></span><span class="op">(</span>total_foi <span class="op">=</span> <span class="cn">NA</span>, progression <span class="op">=</span> <span class="fl">0.1</span>, recovery <span class="op">=</span> <span class="fl">0.05</span><span class="op">)</span>,</span>
<span>                               N <span class="op">=</span> <span class="va">empty_matrix</span>,</span>
<span>                               transmissability <span class="op">=</span> <span class="fl">0.75</span>,</span>
<span>                               per_capita_transmission <span class="op">=</span> <span class="va">empty_matrix</span>,</span>
<span>                               .mats_to_return <span class="op">=</span> <span class="fu"><a href="../reference/engine_functions.html">c</a></span><span class="op">(</span><span class="st">"state"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">epi_rk4</span><span class="op">$</span><span class="fu">report</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt;     matrix time row col        value</span></span>
<span><span class="co">#&gt; 1    state    0   S     9.990000e+02</span></span>
<span><span class="co">#&gt; 2    state    0   E     1.000000e+00</span></span>
<span><span class="co">#&gt; 3    state    0   I     0.000000e+00</span></span>
<span><span class="co">#&gt; 4    state    0   R     0.000000e+00</span></span>
<span><span class="co">#&gt; 5    state    1   S     9.989848e+02</span></span>
<span><span class="co">#&gt; 6    state    1   E     9.502965e-01</span></span>
<span><span class="co">#&gt; 7    state    1   I     6.390140e-02</span></span>
<span><span class="co">#&gt; 8    state    1   R     1.015230e-03</span></span>
<span><span class="co">#&gt; 9    state    2   S     9.989388e+02</span></span>
<span><span class="co">#&gt; 10   state    2   E     9.336567e-01</span></span>
<span><span class="co">#&gt; 11   state    2   I     1.234922e-01</span></span>
<span><span class="co">#&gt; 12   state    2   R     4.086569e-03</span></span>
<span><span class="co">#&gt; 13   state    3   S     9.988636e+02</span></span>
<span><span class="co">#&gt; 14   state    3   E     9.463694e-01</span></span>
<span><span class="co">#&gt; 15   state    3   I     1.809617e-01</span></span>
<span><span class="co">#&gt; 16   state    3   R     9.105480e-03</span></span>
<span><span class="co">#&gt; 17   state    4   S     9.987598e+02</span></span>
<span><span class="co">#&gt; 18   state    4   E     9.859539e-01</span></span>
<span><span class="co">#&gt; 19   state    4   I     2.382230e-01</span></span>
<span><span class="co">#&gt; 20   state    4   R     1.603183e-02</span></span>
<span><span class="co">#&gt; 21   state    5   S     9.986272e+02</span></span>
<span><span class="co">#&gt; 22   state    5   E     1.050966e+00</span></span>
<span><span class="co">#&gt; 23   state    5   I     2.969966e-01</span></span>
<span><span class="co">#&gt; 24   state    5   R     2.488603e-02</span></span>
<span><span class="co">#&gt; 25   state    6   S     9.984645e+02</span></span>
<span><span class="co">#&gt; 26   state    6   E     1.140854e+00</span></span>
<span><span class="co">#&gt; 27   state    6   I     3.588803e-01</span></span>
<span><span class="co">#&gt; 28   state    6   R     3.574375e-02</span></span>
<span><span class="co">#&gt; 29   state    7   S     9.982700e+02</span></span>
<span><span class="co">#&gt; 30   state    7   E     1.255856e+00</span></span>
<span><span class="co">#&gt; 31   state    7   I     4.254080e-01</span></span>
<span><span class="co">#&gt; 32   state    7   R     4.873277e-02</span></span>
<span><span class="co">#&gt; 33   state    8   S     9.980409e+02</span></span>
<span><span class="co">#&gt; 34   state    8   E     1.396925e+00</span></span>
<span><span class="co">#&gt; 35   state    8   I     4.981013e-01</span></span>
<span><span class="co">#&gt; 36   state    8   R     6.403167e-02</span></span>
<span><span class="co">#&gt; 37   state    9   S     9.977739e+02</span></span>
<span><span class="co">#&gt; 38   state    9   E     1.565692e+00</span></span>
<span><span class="co">#&gt; 39   state    9   I     5.785159e-01</span></span>
<span><span class="co">#&gt; 40   state    9   R     8.187016e-02</span></span>
<span><span class="co">#&gt; 41   state   10   S     9.974647e+02</span></span>
<span><span class="co">#&gt; 42   state   10   E     1.764440e+00</span></span>
<span><span class="co">#&gt; 43   state   10   I     6.682835e-01</span></span>
<span><span class="co">#&gt; 44   state   10   R     1.025309e-01</span></span>
<span><span class="co">#&gt; 45   state   11   S     9.971084e+02</span></span>
<span><span class="co">#&gt; 46   state   11   E     1.996109e+00</span></span>
<span><span class="co">#&gt; 47   state   11   I     7.691523e-01</span></span>
<span><span class="co">#&gt; 48   state   11   R     1.263526e-01</span></span>
<span><span class="co">#&gt; 49   state   12   S     9.966989e+02</span></span>
<span><span class="co">#&gt; 50   state   12   E     2.264316e+00</span></span>
<span><span class="co">#&gt; 51   state   12   I     8.830273e-01</span></span>
<span><span class="co">#&gt; 52   state   12   R     1.537347e-01</span></span>
<span><span class="co">#&gt; 53   state   13   S     9.962295e+02</span></span>
<span><span class="co">#&gt; 54   state   13   E     2.573390e+00</span></span>
<span><span class="co">#&gt; 55   state   13   I     1.012010e+00</span></span>
<span><span class="co">#&gt; 56   state   13   R     1.851430e-01</span></span>
<span><span class="co">#&gt; 57   state   14   S     9.956920e+02</span></span>
<span><span class="co">#&gt; 58   state   14   E     2.928424e+00</span></span>
<span><span class="co">#&gt; 59   state   14   I     1.158440e+00</span></span>
<span><span class="co">#&gt; 60   state   14   R     2.211169e-01</span></span>
<span><span class="co">#&gt; 61   state   15   S     9.950774e+02</span></span>
<span><span class="co">#&gt; 62   state   15   E     3.335345e+00</span></span>
<span><span class="co">#&gt; 63   state   15   I     1.324941e+00</span></span>
<span><span class="co">#&gt; 64   state   15   R     2.622784e-01</span></span>
<span><span class="co">#&gt; 65   state   16   S     9.943752e+02</span></span>
<span><span class="co">#&gt; 66   state   16   E     3.800997e+00</span></span>
<span><span class="co">#&gt; 67   state   16   I     1.514466e+00</span></span>
<span><span class="co">#&gt; 68   state   16   R     3.093415e-01</span></span>
<span><span class="co">#&gt; 69   state   17   S     9.935733e+02</span></span>
<span><span class="co">#&gt; 70   state   17   E     4.333237e+00</span></span>
<span><span class="co">#&gt; 71   state   17   I     1.730352e+00</span></span>
<span><span class="co">#&gt; 72   state   17   R     3.631250e-01</span></span>
<span><span class="co">#&gt; 73   state   18   S     9.926580e+02</span></span>
<span><span class="co">#&gt; 74   state   18   E     4.941057e+00</span></span>
<span><span class="co">#&gt; 75   state   18   I     1.976377e+00</span></span>
<span><span class="co">#&gt; 76   state   18   R     4.245654e-01</span></span>
<span><span class="co">#&gt; 77   state   19   S     9.916137e+02</span></span>
<span><span class="co">#&gt; 78   state   19   E     5.634709e+00</span></span>
<span><span class="co">#&gt; 79   state   19   I     2.256823e+00</span></span>
<span><span class="co">#&gt; 80   state   19   R     4.947327e-01</span></span>
<span><span class="co">#&gt; 81   state   20   S     9.904227e+02</span></span>
<span><span class="co">#&gt; 82   state   20   E     6.425857e+00</span></span>
<span><span class="co">#&gt; 83   state   20   I     2.576547e+00</span></span>
<span><span class="co">#&gt; 84   state   20   R     5.748487e-01</span></span>
<span><span class="co">#&gt; 85   state   21   S     9.890649e+02</span></span>
<span><span class="co">#&gt; 86   state   21   E     7.327745e+00</span></span>
<span><span class="co">#&gt; 87   state   21   I     2.941060e+00</span></span>
<span><span class="co">#&gt; 88   state   21   R     6.663070e-01</span></span>
<span><span class="co">#&gt; 89   state   22   S     9.875173e+02</span></span>
<span><span class="co">#&gt; 90   state   22   E     8.355375e+00</span></span>
<span><span class="co">#&gt; 91   state   22   I     3.356616e+00</span></span>
<span><span class="co">#&gt; 92   state   22   R     7.706962e-01</span></span>
<span><span class="co">#&gt; 93   state   23   S     9.857541e+02</span></span>
<span><span class="co">#&gt; 94   state   23   E     9.525717e+00</span></span>
<span><span class="co">#&gt; 95   state   23   I     3.830308e+00</span></span>
<span><span class="co">#&gt; 96   state   23   R     8.898264e-01</span></span>
<span><span class="co">#&gt; 97   state   24   S     9.837461e+02</span></span>
<span><span class="co">#&gt; 98   state   24   E     1.085792e+01</span></span>
<span><span class="co">#&gt; 99   state   24   I     4.370175e+00</span></span>
<span><span class="co">#&gt; 100  state   24   R     1.025758e+00</span></span>
<span><span class="co">#&gt; 101  state   25   S     9.814603e+02</span></span>
<span><span class="co">#&gt; 102  state   25   E     1.237357e+01</span></span>
<span><span class="co">#&gt; 103  state   25   I     4.985324e+00</span></span>
<span><span class="co">#&gt; 104  state   25   R     1.180837e+00</span></span>
<span><span class="co">#&gt; 105  state   26   S     9.814603e+02</span></span>
<span><span class="co">#&gt; 106  state   26   E     1.237357e+01</span></span>
<span><span class="co">#&gt; 107  state   26   I     4.985324e+00</span></span>
<span><span class="co">#&gt; 108  state   26   R     1.180837e+00</span></span>
<span></span>
<span></span>
<span><span class="va">age_rk4</span> <span class="op">=</span> <span class="fu"><a href="../reference/SimulatorConstructor.html">SimulatorConstructor</a></span><span class="op">(</span><span class="va">age_dir</span>,</span>
<span>                                     time_steps <span class="op">=</span> <span class="fl">25L</span>,</span>
<span>                                     state <span class="op">=</span> <span class="fu"><a href="../reference/engine_functions.html">c</a></span><span class="op">(</span>young <span class="op">=</span> <span class="fl">333</span>, medium <span class="op">=</span> <span class="fl">333</span>, old <span class="op">=</span> <span class="fl">333</span><span class="op">)</span>,</span>
<span>                                     flow <span class="op">=</span> <span class="fu"><a href="../reference/engine_functions.html">c</a></span><span class="op">(</span>ageing_rate <span class="op">=</span> <span class="fl">0.03</span>, birth_rate <span class="op">=</span> <span class="fl">5</span>, death_rate <span class="op">=</span> <span class="fl">0.01</span><span class="op">)</span>,</span>
<span>                                     per_capita_transmission <span class="op">=</span> <span class="va">empty_matrix</span>,</span>
<span>                                     .mats_to_return <span class="op">=</span> <span class="fu"><a href="../reference/engine_functions.html">c</a></span><span class="op">(</span><span class="st">"state"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">age_rk4</span><span class="op">$</span><span class="fu">report</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt;    matrix time    row col    value</span></span>
<span><span class="co">#&gt; 1   state    0  young     333.0000</span></span>
<span><span class="co">#&gt; 2   state    0 medium     333.0000</span></span>
<span><span class="co">#&gt; 3   state    0    old     333.0000</span></span>
<span><span class="co">#&gt; 4   state    1  young     329.7043</span></span>
<span><span class="co">#&gt; 5   state    1 medium     332.9692</span></span>
<span><span class="co">#&gt; 6   state    1    old     337.4260</span></span>
<span><span class="co">#&gt; 7   state    2  young     326.4740</span></span>
<span><span class="co">#&gt; 8   state    2 medium     332.8743</span></span>
<span><span class="co">#&gt; 9   state    2    old     341.8213</span></span>
<span><span class="co">#&gt; 10  state    3  young     323.3076</span></span>
<span><span class="co">#&gt; 11  state    3 medium     332.7179</span></span>
<span><span class="co">#&gt; 12  state    3    old     346.1850</span></span>
<span><span class="co">#&gt; 13  state    4  young     320.2040</span></span>
<span><span class="co">#&gt; 14  state    4 medium     332.5024</span></span>
<span><span class="co">#&gt; 15  state    4    old     350.5159</span></span>
<span><span class="co">#&gt; 16  state    5  young     317.1619</span></span>
<span><span class="co">#&gt; 17  state    5 medium     332.2303</span></span>
<span><span class="co">#&gt; 18  state    5    old     354.8133</span></span>
<span><span class="co">#&gt; 19  state    6  young     314.1800</span></span>
<span><span class="co">#&gt; 20  state    6 medium     331.9038</span></span>
<span><span class="co">#&gt; 21  state    6    old     359.0762</span></span>
<span><span class="co">#&gt; 22  state    7  young     311.2572</span></span>
<span><span class="co">#&gt; 23  state    7 medium     331.5253</span></span>
<span><span class="co">#&gt; 24  state    7    old     363.3037</span></span>
<span><span class="co">#&gt; 25  state    8  young     308.3924</span></span>
<span><span class="co">#&gt; 26  state    8 medium     331.0970</span></span>
<span><span class="co">#&gt; 27  state    8    old     367.4951</span></span>
<span><span class="co">#&gt; 28  state    9  young     305.5843</span></span>
<span><span class="co">#&gt; 29  state    9 medium     330.6208</span></span>
<span><span class="co">#&gt; 30  state    9    old     371.6497</span></span>
<span><span class="co">#&gt; 31  state   10  young     302.8318</span></span>
<span><span class="co">#&gt; 32  state   10 medium     330.0990</span></span>
<span><span class="co">#&gt; 33  state   10    old     375.7668</span></span>
<span><span class="co">#&gt; 34  state   11  young     300.1339</span></span>
<span><span class="co">#&gt; 35  state   11 medium     329.5335</span></span>
<span><span class="co">#&gt; 36  state   11    old     379.8456</span></span>
<span><span class="co">#&gt; 37  state   12  young     297.4894</span></span>
<span><span class="co">#&gt; 38  state   12 medium     328.9263</span></span>
<span><span class="co">#&gt; 39  state   12    old     383.8857</span></span>
<span><span class="co">#&gt; 40  state   13  young     294.8973</span></span>
<span><span class="co">#&gt; 41  state   13 medium     328.2792</span></span>
<span><span class="co">#&gt; 42  state   13    old     387.8865</span></span>
<span><span class="co">#&gt; 43  state   14  young     292.3566</span></span>
<span><span class="co">#&gt; 44  state   14 medium     327.5940</span></span>
<span><span class="co">#&gt; 45  state   14    old     391.8474</span></span>
<span><span class="co">#&gt; 46  state   15  young     289.8663</span></span>
<span><span class="co">#&gt; 47  state   15 medium     326.8725</span></span>
<span><span class="co">#&gt; 48  state   15    old     395.7680</span></span>
<span><span class="co">#&gt; 49  state   16  young     287.4252</span></span>
<span><span class="co">#&gt; 50  state   16 medium     326.1165</span></span>
<span><span class="co">#&gt; 51  state   16    old     399.6478</span></span>
<span><span class="co">#&gt; 52  state   17  young     285.0326</span></span>
<span><span class="co">#&gt; 53  state   17 medium     325.3275</span></span>
<span><span class="co">#&gt; 54  state   17    old     403.4864</span></span>
<span><span class="co">#&gt; 55  state   18  young     282.6873</span></span>
<span><span class="co">#&gt; 56  state   18 medium     324.5072</span></span>
<span><span class="co">#&gt; 57  state   18    old     407.2836</span></span>
<span><span class="co">#&gt; 58  state   19  young     280.3885</span></span>
<span><span class="co">#&gt; 59  state   19 medium     323.6571</span></span>
<span><span class="co">#&gt; 60  state   19    old     411.0388</span></span>
<span><span class="co">#&gt; 61  state   20  young     278.1353</span></span>
<span><span class="co">#&gt; 62  state   20 medium     322.7787</span></span>
<span><span class="co">#&gt; 63  state   20    old     414.7519</span></span>
<span><span class="co">#&gt; 64  state   21  young     275.9267</span></span>
<span><span class="co">#&gt; 65  state   21 medium     321.8735</span></span>
<span><span class="co">#&gt; 66  state   21    old     418.4225</span></span>
<span><span class="co">#&gt; 67  state   22  young     273.7618</span></span>
<span><span class="co">#&gt; 68  state   22 medium     320.9429</span></span>
<span><span class="co">#&gt; 69  state   22    old     422.0504</span></span>
<span><span class="co">#&gt; 70  state   23  young     271.6399</span></span>
<span><span class="co">#&gt; 71  state   23 medium     319.9882</span></span>
<span><span class="co">#&gt; 72  state   23    old     425.6355</span></span>
<span><span class="co">#&gt; 73  state   24  young     269.5600</span></span>
<span><span class="co">#&gt; 74  state   24 medium     319.0108</span></span>
<span><span class="co">#&gt; 75  state   24    old     429.1775</span></span>
<span><span class="co">#&gt; 76  state   25  young     267.5213</span></span>
<span><span class="co">#&gt; 77  state   25 medium     318.0120</span></span>
<span><span class="co">#&gt; 78  state   25    old     432.6762</span></span>
<span><span class="co">#&gt; 79  state   26  young     267.5213</span></span>
<span><span class="co">#&gt; 80  state   26 medium     318.0120</span></span>
<span><span class="co">#&gt; 81  state   26    old     432.6762</span></span></code></pre></div>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">epi_euler</span> <span class="op">=</span> <span class="fu"><a href="../reference/SimulatorConstructor.html">SimulatorConstructor</a></span><span class="op">(</span><span class="va">epi_dir</span>,</span>
<span>                                 integration_method <span class="op">=</span> <span class="va">Euler</span>,</span>
<span>                                 time_steps <span class="op">=</span> <span class="fl">25L</span>,</span>
<span>                                 state <span class="op">=</span> <span class="fu"><a href="../reference/engine_functions.html">c</a></span><span class="op">(</span>S <span class="op">=</span> <span class="fl">999</span>, E <span class="op">=</span> <span class="fl">1</span>, I <span class="op">=</span> <span class="fl">0</span>, R <span class="op">=</span> <span class="fl">0</span><span class="op">)</span>,</span>
<span>                                 flow <span class="op">=</span> <span class="fu"><a href="../reference/engine_functions.html">c</a></span><span class="op">(</span>total_foi <span class="op">=</span> <span class="cn">NA</span>, progression <span class="op">=</span> <span class="fl">0.1</span>, recovery <span class="op">=</span> <span class="fl">0.05</span><span class="op">)</span>,</span>
<span>                                 N <span class="op">=</span> <span class="va">empty_matrix</span>,</span>
<span>                                 transmissability <span class="op">=</span> <span class="fl">0.75</span>,</span>
<span>                                 per_capita_transmission <span class="op">=</span> <span class="va">empty_matrix</span>,</span>
<span>                                 .mats_to_return <span class="op">=</span> <span class="fu"><a href="../reference/engine_functions.html">c</a></span><span class="op">(</span><span class="st">"state"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">epi_euler</span><span class="op">$</span><span class="fu">report</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt;     matrix time row col        value</span></span>
<span><span class="co">#&gt; 1    state    0   S     999.00000000</span></span>
<span><span class="co">#&gt; 2    state    0   E       1.00000000</span></span>
<span><span class="co">#&gt; 3    state    0   I       0.00000000</span></span>
<span><span class="co">#&gt; 4    state    0   R       0.00000000</span></span>
<span><span class="co">#&gt; 5    state    1   S     999.00000000</span></span>
<span><span class="co">#&gt; 6    state    1   E       0.90000000</span></span>
<span><span class="co">#&gt; 7    state    1   I       0.10000000</span></span>
<span><span class="co">#&gt; 8    state    1   R       0.00000000</span></span>
<span><span class="co">#&gt; 9    state    2   S     998.92507500</span></span>
<span><span class="co">#&gt; 10   state    2   E       0.88492500</span></span>
<span><span class="co">#&gt; 11   state    2   I       0.18500000</span></span>
<span><span class="co">#&gt; 12   state    2   R       0.00500000</span></span>
<span><span class="co">#&gt; 13   state    3   S     998.78647415</span></span>
<span><span class="co">#&gt; 14   state    3   E       0.93503335</span></span>
<span><span class="co">#&gt; 15   state    3   I       0.26424250</span></span>
<span><span class="co">#&gt; 16   state    3   R       0.01425000</span></span>
<span><span class="co">#&gt; 17   state    4   S     998.58853277</span></span>
<span><span class="co">#&gt; 18   state    4   E       1.03947139</span></span>
<span><span class="co">#&gt; 19   state    4   I       0.34453371</span></span>
<span><span class="co">#&gt; 20   state    4   R       0.02746213</span></span>
<span><span class="co">#&gt; 21   state    5   S     998.33049721</span></span>
<span><span class="co">#&gt; 22   state    5   E       1.19355981</span></span>
<span><span class="co">#&gt; 23   state    5   I       0.43125416</span></span>
<span><span class="co">#&gt; 24   state    5   R       0.04468881</span></span>
<span><span class="co">#&gt; 25   state    6   S     998.00759657</span></span>
<span><span class="co">#&gt; 26   state    6   E       1.39710447</span></span>
<span><span class="co">#&gt; 27   state    6   I       0.52904744</span></span>
<span><span class="co">#&gt; 28   state    6   R       0.06625152</span></span>
<span><span class="co">#&gt; 29   state    7   S     997.61160155</span></span>
<span><span class="co">#&gt; 30   state    7   E       1.65338905</span></span>
<span><span class="co">#&gt; 31   state    7   I       0.64230551</span></span>
<span><span class="co">#&gt; 32   state    7   R       0.09270389</span></span>
<span><span class="co">#&gt; 33   state    8   S     997.13102298</span></span>
<span><span class="co">#&gt; 34   state    8   E       1.96862871</span></span>
<span><span class="co">#&gt; 35   state    8   I       0.77552914</span></span>
<span><span class="co">#&gt; 36   state    8   R       0.12481917</span></span>
<span><span class="co">#&gt; 37   state    9   S     996.55104485</span></span>
<span><span class="co">#&gt; 38   state    9   E       2.35174397</span></span>
<span><span class="co">#&gt; 39   state    9   I       0.93361556</span></span>
<span><span class="co">#&gt; 40   state    9   R       0.16359562</span></span>
<span><span class="co">#&gt; 41   state   10   S     995.85324818</span></span>
<span><span class="co">#&gt; 42   state   10   E       2.81436624</span></span>
<span><span class="co">#&gt; 43   state   10   I       1.12210918</span></span>
<span><span class="co">#&gt; 44   state   10   R       0.21027640</span></span>
<span><span class="co">#&gt; 45   state   11   S     995.01515613</span></span>
<span><span class="co">#&gt; 46   state   11   E       3.37102167</span></span>
<span><span class="co">#&gt; 47   state   11   I       1.34744034</span></span>
<span><span class="co">#&gt; 48   state   11   R       0.26638186</span></span>
<span><span class="co">#&gt; 49   state   12   S     994.00961346</span></span>
<span><span class="co">#&gt; 50   state   12   E       4.03946217</span></span>
<span><span class="co">#&gt; 51   state   12   I       1.61717049</span></span>
<span><span class="co">#&gt; 52   state   12   R       0.33375388</span></span>
<span><span class="co">#&gt; 53   state   13   S     992.80400120</span></span>
<span><span class="co">#&gt; 54   state   13   E       4.84112821</span></span>
<span><span class="co">#&gt; 55   state   13   I       1.94025818</span></span>
<span><span class="co">#&gt; 56   state   13   R       0.41461240</span></span>
<span><span class="co">#&gt; 57   state   14   S     991.35927914</span></span>
<span><span class="co">#&gt; 58   state   14   E       5.80173746</span></span>
<span><span class="co">#&gt; 59   state   14   I       2.32735809</span></span>
<span><span class="co">#&gt; 60   state   14   R       0.51162531</span></span>
<span><span class="co">#&gt; 61   state   15   S     989.62884311</span></span>
<span><span class="co">#&gt; 62   state   15   E       6.95199974</span></span>
<span><span class="co">#&gt; 63   state   15   I       2.79116394</span></span>
<span><span class="co">#&gt; 64   state   15   R       0.62799322</span></span>
<span><span class="co">#&gt; 65   state   16   S     987.55718085</span></span>
<span><span class="co">#&gt; 66   state   16   E       8.32846202</span></span>
<span><span class="co">#&gt; 67   state   16   I       3.34680571</span></span>
<span><span class="co">#&gt; 68   state   16   R       0.76755141</span></span>
<span><span class="co">#&gt; 69   state   17   S     985.07830934</span></span>
<span><span class="co">#&gt; 70   state   17   E       9.97448733</span></span>
<span><span class="co">#&gt; 71   state   17   I       4.01231163</span></span>
<span><span class="co">#&gt; 72   state   17   R       0.93489170</span></span>
<span><span class="co">#&gt; 73   state   18   S     982.11397847</span></span>
<span><span class="co">#&gt; 74   state   18   E      11.94136947</span></span>
<span><span class="co">#&gt; 75   state   18   I       4.80914478</span></span>
<span><span class="co">#&gt; 76   state   18   R       1.13550728</span></span>
<span><span class="co">#&gt; 77   state   19   S     978.57163224</span></span>
<span><span class="co">#&gt; 78   state   19   E      14.28957875</span></span>
<span><span class="co">#&gt; 79   state   19   I       5.76282449</span></span>
<span><span class="co">#&gt; 80   state   19   R       1.37596452</span></span>
<span><span class="co">#&gt; 81   state   20   S     974.34212981</span></span>
<span><span class="co">#&gt; 82   state   20   E      17.09012330</span></span>
<span><span class="co">#&gt; 83   state   20   I       6.90364114</span></span>
<span><span class="co">#&gt; 84   state   20   R       1.66410574</span></span>
<span><span class="co">#&gt; 85   state   21   S     969.29724851</span></span>
<span><span class="co">#&gt; 86   state   21   E      20.42599228</span></span>
<span><span class="co">#&gt; 87   state   21   I       8.26747141</span></span>
<span><span class="co">#&gt; 88   state   21   R       2.00928780</span></span>
<span><span class="co">#&gt; 89   state   22   S     963.28702054</span></span>
<span><span class="co">#&gt; 90   state   22   E      24.39362102</span></span>
<span><span class="co">#&gt; 91   state   22   I       9.89669707</span></span>
<span><span class="co">#&gt; 92   state   22   R       2.42266137</span></span>
<span><span class="co">#&gt; 93   state   23   S     956.13700066</span></span>
<span><span class="co">#&gt; 94   state   23   E      29.10427880</span></span>
<span><span class="co">#&gt; 95   state   23   I      11.84122432</span></span>
<span><span class="co">#&gt; 96   state   23   R       2.91749622</span></span>
<span><span class="co">#&gt; 97   state   24   S     947.64562613</span></span>
<span><span class="co">#&gt; 98   state   24   E      34.68522545</span></span>
<span><span class="co">#&gt; 99   state   24   I      14.15959098</span></span>
<span><span class="co">#&gt; 100  state   24   R       3.50955744</span></span>
<span><span class="co">#&gt; 101  state   25   S     937.58192028</span></span>
<span><span class="co">#&gt; 102  state   25   E      41.28040875</span></span>
<span><span class="co">#&gt; 103  state   25   I      16.92013398</span></span>
<span><span class="co">#&gt; 104  state   25   R       4.21753699</span></span>
<span><span class="co">#&gt; 105  state   26   S     937.58192028</span></span>
<span><span class="co">#&gt; 106  state   26   E      41.28040875</span></span>
<span><span class="co">#&gt; 107  state   26   I      16.92013398</span></span>
<span><span class="co">#&gt; 108  state   26   R       4.21753699</span></span>
<span></span>
<span><span class="va">age_euler</span> <span class="op">=</span> <span class="fu"><a href="../reference/SimulatorConstructor.html">SimulatorConstructor</a></span><span class="op">(</span><span class="va">age_dir</span>,</span>
<span>                                 integration_method <span class="op">=</span> <span class="va">Euler</span>,</span>
<span>                                 time_steps <span class="op">=</span> <span class="fl">25L</span>,</span>
<span>                                 state <span class="op">=</span> <span class="fu"><a href="../reference/engine_functions.html">c</a></span><span class="op">(</span>young <span class="op">=</span> <span class="fl">333</span>, medium <span class="op">=</span> <span class="fl">333</span>, old <span class="op">=</span> <span class="fl">333</span><span class="op">)</span>,</span>
<span>                                 flow <span class="op">=</span> <span class="fu"><a href="../reference/engine_functions.html">c</a></span><span class="op">(</span>ageing_rate <span class="op">=</span> <span class="fl">0.03</span>, birth_rate <span class="op">=</span> <span class="fl">5</span>, death_rate <span class="op">=</span> <span class="fl">0.01</span><span class="op">)</span>,</span>
<span>                                 per_capita_transmission <span class="op">=</span> <span class="va">empty_matrix</span>,</span>
<span>                                 .mats_to_return <span class="op">=</span> <span class="fu"><a href="../reference/engine_functions.html">c</a></span><span class="op">(</span><span class="st">"state"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">age_euler</span><span class="op">$</span><span class="fu">report</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt;    matrix time    row col    value</span></span>
<span><span class="co">#&gt; 1   state    0  young     333.0000</span></span>
<span><span class="co">#&gt; 2   state    0 medium     333.0000</span></span>
<span><span class="co">#&gt; 3   state    0    old     333.0000</span></span>
<span><span class="co">#&gt; 4   state    1  young     328.0100</span></span>
<span><span class="co">#&gt; 5   state    1 medium     333.0000</span></span>
<span><span class="co">#&gt; 6   state    1    old     339.6600</span></span>
<span><span class="co">#&gt; 7   state    2  young     323.1697</span></span>
<span><span class="co">#&gt; 8   state    2 medium     332.8503</span></span>
<span><span class="co">#&gt; 9   state    2    old     346.2534</span></span>
<span><span class="co">#&gt; 10  state    3  young     318.4746</span></span>
<span><span class="co">#&gt; 11  state    3 medium     332.5599</span></span>
<span><span class="co">#&gt; 12  state    3    old     352.7764</span></span>
<span><span class="co">#&gt; 13  state    4  young     313.9204</span></span>
<span><span class="co">#&gt; 14  state    4 medium     332.1373</span></span>
<span><span class="co">#&gt; 15  state    4    old     359.2254</span></span>
<span><span class="co">#&gt; 16  state    5  young     309.5028</span></span>
<span><span class="co">#&gt; 17  state    5 medium     331.5908</span></span>
<span><span class="co">#&gt; 18  state    5    old     365.5973</span></span>
<span><span class="co">#&gt; 19  state    6  young     305.2177</span></span>
<span><span class="co">#&gt; 20  state    6 medium     330.9282</span></span>
<span><span class="co">#&gt; 21  state    6    old     371.8890</span></span>
<span><span class="co">#&gt; 22  state    7  young     301.0611</span></span>
<span><span class="co">#&gt; 23  state    7 medium     330.1569</span></span>
<span><span class="co">#&gt; 24  state    7    old     378.0980</span></span>
<span><span class="co">#&gt; 25  state    8  young     297.0293</span></span>
<span><span class="co">#&gt; 26  state    8 medium     329.2840</span></span>
<span><span class="co">#&gt; 27  state    8    old     384.2217</span></span>
<span><span class="co">#&gt; 28  state    9  young     293.1184</span></span>
<span><span class="co">#&gt; 29  state    9 medium     328.3163</span></span>
<span><span class="co">#&gt; 30  state    9    old     390.2580</span></span>
<span><span class="co">#&gt; 31  state   10  young     289.3249</span></span>
<span><span class="co">#&gt; 32  state   10 medium     327.2604</span></span>
<span><span class="co">#&gt; 33  state   10    old     396.2049</span></span>
<span><span class="co">#&gt; 34  state   11  young     285.6451</span></span>
<span><span class="co">#&gt; 35  state   11 medium     326.1223</span></span>
<span><span class="co">#&gt; 36  state   11    old     402.0607</span></span>
<span><span class="co">#&gt; 37  state   12  young     282.0758</span></span>
<span><span class="co">#&gt; 38  state   12 medium     324.9080</span></span>
<span><span class="co">#&gt; 39  state   12    old     407.8237</span></span>
<span><span class="co">#&gt; 40  state   13  young     278.6135</span></span>
<span><span class="co">#&gt; 41  state   13 medium     323.6231</span></span>
<span><span class="co">#&gt; 42  state   13    old     413.4927</span></span>
<span><span class="co">#&gt; 43  state   14  young     275.2551</span></span>
<span><span class="co">#&gt; 44  state   14 medium     322.2728</span></span>
<span><span class="co">#&gt; 45  state   14    old     419.0665</span></span>
<span><span class="co">#&gt; 46  state   15  young     271.9974</span></span>
<span><span class="co">#&gt; 47  state   15 medium     320.8622</span></span>
<span><span class="co">#&gt; 48  state   15    old     424.5440</span></span>
<span><span class="co">#&gt; 49  state   16  young     268.8375</span></span>
<span><span class="co">#&gt; 50  state   16 medium     319.3963</span></span>
<span><span class="co">#&gt; 51  state   16    old     429.9245</span></span>
<span><span class="co">#&gt; 52  state   17  young     265.7724</span></span>
<span><span class="co">#&gt; 53  state   17 medium     317.8795</span></span>
<span><span class="co">#&gt; 54  state   17    old     435.2071</span></span>
<span><span class="co">#&gt; 55  state   18  young     262.7992</span></span>
<span><span class="co">#&gt; 56  state   18 medium     316.3163</span></span>
<span><span class="co">#&gt; 57  state   18    old     440.3914</span></span>
<span><span class="co">#&gt; 58  state   19  young     259.9152</span></span>
<span><span class="co">#&gt; 59  state   19 medium     314.7108</span></span>
<span><span class="co">#&gt; 60  state   19    old     445.4770</span></span>
<span><span class="co">#&gt; 61  state   20  young     257.1178</span></span>
<span><span class="co">#&gt; 62  state   20 medium     313.0669</span></span>
<span><span class="co">#&gt; 63  state   20    old     450.4635</span></span>
<span><span class="co">#&gt; 64  state   21  young     254.4043</span></span>
<span><span class="co">#&gt; 65  state   21 medium     311.3885</span></span>
<span><span class="co">#&gt; 66  state   21    old     455.3509</span></span>
<span><span class="co">#&gt; 67  state   22  young     251.7721</span></span>
<span><span class="co">#&gt; 68  state   22 medium     309.6789</span></span>
<span><span class="co">#&gt; 69  state   22    old     460.1391</span></span>
<span><span class="co">#&gt; 70  state   23  young     249.2190</span></span>
<span><span class="co">#&gt; 71  state   23 medium     307.9417</span></span>
<span><span class="co">#&gt; 72  state   23    old     464.8280</span></span>
<span><span class="co">#&gt; 73  state   24  young     246.7424</span></span>
<span><span class="co">#&gt; 74  state   24 medium     306.1801</span></span>
<span><span class="co">#&gt; 75  state   24    old     469.4180</span></span>
<span><span class="co">#&gt; 76  state   25  young     244.3401</span></span>
<span><span class="co">#&gt; 77  state   25 medium     304.3969</span></span>
<span><span class="co">#&gt; 78  state   25    old     473.9092</span></span>
<span><span class="co">#&gt; 79  state   26  young     244.3401</span></span>
<span><span class="co">#&gt; 80  state   26 medium     304.3969</span></span>
<span><span class="co">#&gt; 81  state   26    old     473.9092</span></span></code></pre></div>
<p>Eventually it will be possible to create a new model directory that
corresponds to the product of two models using the “ModelProduct”
function. This function accepts as arguments two model simulators and
will write a model definition corresponding to the product of those
models. Currently the file writing capability is unavailable so this
function is not complete. Note that every model directory created this
way will have a blank “derivations.json” file, the use must either give
numerical values for the “per_capita_transmission” matrix directly or
add expressions to “derivations.json” that compute the
“per_capita_transmission” matrix from some other supplied
parameters.</p>
  </main>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Steve Walker, Darren Flynn-Primrose, Weiguang Guan, Ben Bolker.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
