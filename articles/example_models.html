<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="macpan2">
<title>Example Models • macpan2</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Example Models">
<meta property="og:description" content="macpan2">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light" data-bs-theme="light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">macpan2</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.4.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/quickstart.html">Quickstart</a>
    <a class="dropdown-item" href="../articles/example_models.html">Example Models</a>
    <a class="dropdown-item" href="../articles/calibration.html">Calibrating Compartmental Models to Data</a>
    <a class="dropdown-item" href="../articles/real_data.html">Fitting to Real Data</a>
    <a class="dropdown-item" href="../articles/state_updaters.html">ODE Solvers, Process Error, and Difference Equations</a>
    <div class="dropdown-divider"></div>
    <a class="dropdown-item" href="../articles/index.html">More articles...</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/canmod/macpan2/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Example Models</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/canmod/macpan2/blob/HEAD/vignettes/example_models.Rmd" class="external-link"><code>vignettes/example_models.Rmd</code></a></small>
      <div class="d-none name"><code>example_models.Rmd</code></div>
    </div>

    
    
<p><a href="https://canmod.github.io/macpan2/articles/vignette-status#mature-draft"><img src="https://img.shields.io/badge/status-mature%20draft-yellow" alt="status"></a></p>
<div class="section level2">
<h2 id="finding-example-models">Finding Example Models<a class="anchor" aria-label="anchor" href="#finding-example-models"></a>
</h2>
<p>The <code>macpan2</code> comes with a set of example model
definitions, which can be listed with the <code>show_models</code>
function.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/show_models.html">show_models</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<colgroup>
<col width="17%">
<col width="15%">
<col width="67%">
</colgroup>
<thead><tr class="header">
<th align="left">dir</th>
<th align="left">title</th>
<th align="left">index_entry</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left"><a href="https://github.com/canmod/macpan2/tree/main/inst/starter_models/lotka_volterra_competition" class="external-link">lotka_volterra_competition</a></td>
<td align="left">Lotka-Volterra</td>
<td align="left">simple two-species competition model</td>
</tr>
<tr class="even">
<td align="left"><a href="https://github.com/canmod/macpan2/tree/main/inst/starter_models/lotka_volterra_predator_prey" class="external-link">lotka_volterra_predator_prey</a></td>
<td align="left">Lotka-Volterra</td>
<td align="left">simple predator-prey model</td>
</tr>
<tr class="odd">
<td align="left"><a href="https://github.com/canmod/macpan2/tree/main/inst/starter_models/macpan_base" class="external-link">macpan_base</a></td>
<td align="left">MacPan base</td>
<td align="left">re-implementation of the McMaster group’s COVID-19
model</td>
</tr>
<tr class="even">
<td align="left"><a href="https://github.com/canmod/macpan2/tree/main/inst/starter_models/nfds" class="external-link">nfds</a></td>
<td align="left">NFDS and vaccine design</td>
<td align="left">An ecological model using population genomics to design
optimal vaccines as implemented in Colijn et al. (2020)</td>
</tr>
<tr class="odd">
<td align="left"><a href="https://github.com/canmod/macpan2/tree/main/inst/starter_models/seir" class="external-link">seir</a></td>
<td align="left">basic SEIR</td>
<td align="left">vanilla epidemic model with an exposed class</td>
</tr>
<tr class="even">
<td align="left"><a href="https://github.com/canmod/macpan2/tree/main/inst/starter_models/shiver" class="external-link">shiver</a></td>
<td align="left">SHIVER = SEIR + H + V</td>
<td align="left">A modified SEIR model with Hospitalization and
Vaccination</td>
</tr>
<tr class="odd">
<td align="left"><a href="https://github.com/canmod/macpan2/tree/main/inst/starter_models/si" class="external-link">si</a></td>
<td align="left">basic SI</td>
<td align="left">a very simple epidemic model</td>
</tr>
<tr class="even">
<td align="left"><a href="https://github.com/canmod/macpan2/tree/main/inst/starter_models/sir" class="external-link">sir</a></td>
<td align="left">basic SIR</td>
<td align="left">a very simple epidemic model</td>
</tr>
<tr class="odd">
<td align="left"><a href="https://github.com/canmod/macpan2/tree/main/inst/starter_models/sir_demog" class="external-link">sir_demog</a></td>
<td align="left">SIR with demography</td>
<td align="left">An SIR model with birth and death</td>
</tr>
<tr class="even">
<td align="left"><a href="https://github.com/canmod/macpan2/tree/main/inst/starter_models/sir_waning" class="external-link">sir_waning</a></td>
<td align="left">SIR with waning immunity</td>
<td align="left">a basic SIR model with a flow from R back to S</td>
</tr>
<tr class="odd">
<td align="left"><a href="https://github.com/canmod/macpan2/tree/main/inst/starter_models/ww" class="external-link">ww</a></td>
<td align="left">Wastewater model</td>
<td align="left">Macpan base with an additional wastewater
component</td>
</tr>
</tbody>
</table>
<p>There are three things that you can do with the items on this list:
read them, use them, and modify them. To read them, just click on the
links above to take you to each model. To use them and modify them,
please continue reading.</p>
</div>
<div class="section level2">
<h2 id="using-examples">Using Examples<a class="anchor" aria-label="anchor" href="#using-examples"></a>
</h2>
<p>To use the <code>sir</code> example it can be read into R using the
following code.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">sir_dir</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"starter_models"</span>, <span class="st">"sir"</span>, package <span class="op">=</span> <span class="st">"macpan2"</span><span class="op">)</span></span>
<span><span class="va">sir</span> <span class="op">=</span> <span class="fu"><a href="../reference/mp_tmb_library.html">mp_tmb_library</a></span><span class="op">(</span><span class="va">sir_dir</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/engine_functions.html">print</a></span><span class="op">(</span><span class="va">sir</span><span class="op">)</span></span>
<span><span class="co">#&gt; ---------------------</span></span>
<span><span class="co">#&gt; Default values:</span></span>
<span><span class="co">#&gt; ---------------------</span></span>
<span><span class="co">#&gt;  matrix row col value</span></span>
<span><span class="co">#&gt;    beta           0.2</span></span>
<span><span class="co">#&gt;   gamma           0.1</span></span>
<span><span class="co">#&gt;       N         100.0</span></span>
<span><span class="co">#&gt;       I           1.0</span></span>
<span><span class="co">#&gt;       R           0.0</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ---------------------</span></span>
<span><span class="co">#&gt; Before the simulation loop (t = 0):</span></span>
<span><span class="co">#&gt; ---------------------</span></span>
<span><span class="co">#&gt; 1: S ~ N - I - R</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ---------------------</span></span>
<span><span class="co">#&gt; At every iteration of the simulation loop (t = 1 to T):</span></span>
<span><span class="co">#&gt; ---------------------</span></span>
<span><span class="co">#&gt; 1: infection ~ S * I * beta/N</span></span>
<span><span class="co">#&gt; 2: recovery ~ gamma * I</span></span>
<span><span class="co">#&gt; 3: S ~ S - infection</span></span>
<span><span class="co">#&gt; 4: I ~ I + infection - recovery</span></span>
<span><span class="co">#&gt; 5: R ~ R + recovery</span></span></code></pre></div>
<p>To see how to actually generate simulations from this model see <a href="https://canmod.github.io/macpan2/articles/quickstart">this
article</a>. To use another model, again, replace <code>sir</code> with
another entry in the <code>dir</code> column above.</p>
</div>
<div class="section level2">
<h2 id="modifying-examples">Modifying Examples<a class="anchor" aria-label="anchor" href="#modifying-examples"></a>
</h2>
<p>To take <code>sir</code> as a jumping-off point for producing your
own model one may use the following code.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">my_sir_dir</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">"my_sir"</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/mp_model_starter.html">mp_model_starter</a></span><span class="op">(</span><span class="st">"sir"</span>, <span class="va">my_sir_dir</span><span class="op">)</span></span>
<span><span class="co">#&gt; ---------------------</span></span>
<span><span class="co">#&gt; Default values:</span></span>
<span><span class="co">#&gt; ---------------------</span></span>
<span><span class="co">#&gt;  matrix row col value</span></span>
<span><span class="co">#&gt;    beta           0.2</span></span>
<span><span class="co">#&gt;   gamma           0.1</span></span>
<span><span class="co">#&gt;       N         100.0</span></span>
<span><span class="co">#&gt;       I           1.0</span></span>
<span><span class="co">#&gt;       R           0.0</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ---------------------</span></span>
<span><span class="co">#&gt; Before the simulation loop (t = 0):</span></span>
<span><span class="co">#&gt; ---------------------</span></span>
<span><span class="co">#&gt; 1: S ~ N - I - R</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ---------------------</span></span>
<span><span class="co">#&gt; At every iteration of the simulation loop (t = 1 to T):</span></span>
<span><span class="co">#&gt; ---------------------</span></span>
<span><span class="co">#&gt; 1: infection ~ S * I * beta/N</span></span>
<span><span class="co">#&gt; 2: recovery ~ gamma * I</span></span>
<span><span class="co">#&gt; 3: S ~ S - infection</span></span>
<span><span class="co">#&gt; 4: I ~ I + infection - recovery</span></span>
<span><span class="co">#&gt; 5: R ~ R + recovery</span></span></code></pre></div>
<p>After running this code you can go to the files in
<code>my_sir_dir</code> and modify what you see there. Note that you
typically want to chose a specific directory for your model instead of
using <code>tempdir</code>. You still need to read your own model in the
usual way.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">my_sir</span> <span class="op">=</span> <span class="fu"><a href="../reference/mp_tmb_library.html">mp_tmb_library</a></span><span class="op">(</span><span class="va">my_sir_dir</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/engine_functions.html">print</a></span><span class="op">(</span><span class="va">my_sir</span><span class="op">)</span></span>
<span><span class="co">#&gt; ---------------------</span></span>
<span><span class="co">#&gt; Default values:</span></span>
<span><span class="co">#&gt; ---------------------</span></span>
<span><span class="co">#&gt;  matrix row col value</span></span>
<span><span class="co">#&gt;    beta           0.2</span></span>
<span><span class="co">#&gt;   gamma           0.1</span></span>
<span><span class="co">#&gt;       N         100.0</span></span>
<span><span class="co">#&gt;       I           1.0</span></span>
<span><span class="co">#&gt;       R           0.0</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ---------------------</span></span>
<span><span class="co">#&gt; Before the simulation loop (t = 0):</span></span>
<span><span class="co">#&gt; ---------------------</span></span>
<span><span class="co">#&gt; 1: S ~ N - I - R</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ---------------------</span></span>
<span><span class="co">#&gt; At every iteration of the simulation loop (t = 1 to T):</span></span>
<span><span class="co">#&gt; ---------------------</span></span>
<span><span class="co">#&gt; 1: infection ~ S * I * beta/N</span></span>
<span><span class="co">#&gt; 2: recovery ~ gamma * I</span></span>
<span><span class="co">#&gt; 3: S ~ S - infection</span></span>
<span><span class="co">#&gt; 4: I ~ I + infection - recovery</span></span>
<span><span class="co">#&gt; 5: R ~ R + recovery</span></span></code></pre></div>
<p>These look identical to what came before, but that’s just because it
hasn’t been modified … yet …</p>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Steve Walker, Weiguang Guan, Ben Bolker, Jen Freeman, Darren Flynn-Primrose.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.8.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
