<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Example Models • macpan2</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png">
<link rel="icon" type="”image/svg+xml”" href="../favicon.svg">
<link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png">
<link rel="icon" sizes="any" href="../favicon.ico">
<link rel="manifest" href="../site.webmanifest">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Example Models">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.css" integrity="sha384-nB0miv6/jRmo5UMMR1wu3Gz6NLsoTkbqJghGIsx//Rlm+ZU03BU6SQNC66uf4l5+" crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.js" integrity="sha384-7zkQWkzuo3B5mTepMUcHkMB5jZaolc2xDwL6VFqjFALcbeS9Ggm/Yr2r3Dy4lfFg" crossorigin="anonymous"></script><script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/contrib/auto-render.min.js" integrity="sha384-43gviWU0YVjaDtb/GhzOouOXtZMP/7XUzwPTstBeZFe/+rCMvRwr4yROQP43s0Xk" crossorigin="anonymous" onload="renderMathInElement(document.body);"></script>
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">macpan2</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">3.2.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/quickstart.html">Quickstart</a></li>
    <li><a class="dropdown-item" href="../articles/example_models.html">Example Models</a></li>
    <li><a class="dropdown-item" href="../articles/calibration.html">Calibrating Compartmental Models to Data</a></li>
    <li><a class="dropdown-item" href="../articles/real_data.html">Fitting to Real Data</a></li>
    <li><a class="dropdown-item" href="../articles/options.html">Options</a></li>
    <li><a class="dropdown-item" href="../articles/FAQs.html">FAQs</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><a class="dropdown-item" href="../articles/index.html">More articles...</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/canmod/macpan2/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Example Models</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/canmod/macpan2/blob/main/vignettes/example_models.Rmd" class="external-link"><code>vignettes/example_models.Rmd</code></a></small>
      <div class="d-none name"><code>example_models.Rmd</code></div>
    </div>

    
    
<p><a href="https://canmod.github.io/macpan2/articles/vignette-status#mature-draft"><img src="https://img.shields.io/badge/status-mature%20draft-yellow" alt="status"></a></p>
<div class="section level2">
<h2 id="finding-example-models">Finding Example Models<a class="anchor" aria-label="anchor" href="#finding-example-models"></a>
</h2>
<p>The <code>macpan2</code> comes with a set of example model
definitions, which can be listed with the <code><a href="../reference/mp_show_models.html">mp_show_models()</a></code>
function.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/mp_show_models.html">mp_show_models</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<colgroup>
<col width="16%">
<col width="18%">
<col width="64%">
</colgroup>
<thead><tr class="header">
<th align="left">Directory</th>
<th align="left">Title</th>
<th align="left">Description</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left"><a href="https://github.com/canmod/macpan2/tree/main/inst/starter_models/awareness" class="external-link">awareness</a></td>
<td align="left">Awareness Models</td>
<td align="left">Behaviour modifications in response to death</td>
</tr>
<tr class="even">
<td align="left"><a href="https://github.com/canmod/macpan2/tree/main/inst/starter_models/fibonacci" class="external-link">fibonacci</a></td>
<td align="left">Fibonacci Numbers</td>
<td align="left">Matrix population model for generating the Fibonacci
numbers</td>
</tr>
<tr class="odd">
<td align="left"><a href="https://github.com/canmod/macpan2/tree/main/inst/starter_models/hiv" class="external-link">hiv</a></td>
<td align="left">HIV</td>
<td align="left">A simple HIV model</td>
</tr>
<tr class="even">
<td align="left"><a href="https://github.com/canmod/macpan2/tree/main/inst/starter_models/lotka_volterra_competition" class="external-link">lotka_volterra_competition</a></td>
<td align="left">Lotka-Volterra</td>
<td align="left">Simple two-species competition model</td>
</tr>
<tr class="odd">
<td align="left"><a href="https://github.com/canmod/macpan2/tree/main/inst/starter_models/lotka_volterra_predator_prey" class="external-link">lotka_volterra_predator_prey</a></td>
<td align="left">Lotka-Volterra</td>
<td align="left">Simple predator-prey model</td>
</tr>
<tr class="even">
<td align="left"><a href="https://github.com/canmod/macpan2/tree/main/inst/starter_models/macpan_base" class="external-link">macpan_base</a></td>
<td align="left">Macpan Base</td>
<td align="left">Re-implementation of the McMaster group’s COVID-19
model</td>
</tr>
<tr class="odd">
<td align="left"><a href="https://github.com/canmod/macpan2/tree/main/inst/starter_models/nfds" class="external-link">nfds</a></td>
<td align="left">NFDS and Vaccine Design</td>
<td align="left">An ecological model using population genomics to design
optimal vaccines as implemented in Colijn et al. (2020)</td>
</tr>
<tr class="even">
<td align="left"><a href="https://github.com/canmod/macpan2/tree/main/inst/starter_models/seir" class="external-link">seir</a></td>
<td align="left">Basic SEIR</td>
<td align="left">Simple epidemic model with an exposed class</td>
</tr>
<tr class="odd">
<td align="left"><a href="https://github.com/canmod/macpan2/tree/main/inst/starter_models/shiver" class="external-link">shiver</a></td>
<td align="left">SHIVER = SEIR + H + V</td>
<td align="left">A modified SEIR model with Hospitalization and
Vaccination</td>
</tr>
<tr class="even">
<td align="left"><a href="https://github.com/canmod/macpan2/tree/main/inst/starter_models/si" class="external-link">si</a></td>
<td align="left">Basic SI</td>
<td align="left">A very simple epidemic model</td>
</tr>
<tr class="odd">
<td align="left"><a href="https://github.com/canmod/macpan2/tree/main/inst/starter_models/si_behaviour" class="external-link">si_behaviour</a></td>
<td align="left">SI with Behaviour</td>
<td align="left">SI model with behavioural protection in response to the
number of infectious individuals</td>
</tr>
<tr class="even">
<td align="left"><a href="https://github.com/canmod/macpan2/tree/main/inst/starter_models/sir" class="external-link">sir</a></td>
<td align="left">Basic SIR</td>
<td align="left">A very simple epidemic model</td>
</tr>
<tr class="odd">
<td align="left"><a href="https://github.com/canmod/macpan2/tree/main/inst/starter_models/sir_age" class="external-link">sir_age</a></td>
<td align="left">Age-stratified SIR</td>
<td align="left">An age-stratified SIR model</td>
</tr>
<tr class="even">
<td align="left"><a href="https://github.com/canmod/macpan2/tree/main/inst/starter_models/sir_demog" class="external-link">sir_demog</a></td>
<td align="left">SIR with Demography</td>
<td align="left">An SIR model with birth and death</td>
</tr>
<tr class="odd">
<td align="left"><a href="https://github.com/canmod/macpan2/tree/main/inst/starter_models/sir_mosquito" class="external-link">sir_mosquito</a></td>
<td align="left">Mosquito-Vector SIR</td>
<td align="left">SIR model for mosquito vectors</td>
</tr>
<tr class="even">
<td align="left"><a href="https://github.com/canmod/macpan2/tree/main/inst/starter_models/sir_waning" class="external-link">sir_waning</a></td>
<td align="left">SIR with Waning Immunity (SIRS)</td>
<td align="left">A basic SIR model with a flow from R back to S</td>
</tr>
<tr class="odd">
<td align="left"><a href="https://github.com/canmod/macpan2/tree/main/inst/starter_models/ww" class="external-link">ww</a></td>
<td align="left">Wastewater Model</td>
<td align="left">Macpan base with an additional wastewater
component</td>
</tr>
</tbody>
</table>
<p>There are three things that you can do with the items on this list:
read them, use them, and modify them. To read them, just click on the
links above to take you to each model. To use them and modify them,
please continue reading.</p>
</div>
<div class="section level2">
<h2 id="using-examples">Using Examples<a class="anchor" aria-label="anchor" href="#using-examples"></a>
</h2>
<p>To use the <code>sir</code> example it can be read into R using the
following code.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">sir_dir</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"starter_models"</span>, <span class="st">"sir"</span>, package <span class="op">=</span> <span class="st">"macpan2"</span><span class="op">)</span></span>
<span><span class="va">sir</span> <span class="op">=</span> <span class="fu"><a href="../reference/mp_tmb_library.html">mp_tmb_library</a></span><span class="op">(</span><span class="va">sir_dir</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/engine_functions.html">print</a></span><span class="op">(</span><span class="va">sir</span><span class="op">)</span></span>
<span><span class="co">#&gt; ---------------------</span></span>
<span><span class="co">#&gt; Default values:</span></span>
<span><span class="co">#&gt;  quantity value</span></span>
<span><span class="co">#&gt;      beta   0.2</span></span>
<span><span class="co">#&gt;     gamma   0.1</span></span>
<span><span class="co">#&gt;         N 100.0</span></span>
<span><span class="co">#&gt;         I   1.0</span></span>
<span><span class="co">#&gt;         R   0.0</span></span>
<span><span class="co">#&gt; ---------------------</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ---------------------</span></span>
<span><span class="co">#&gt; Before the simulation loop (t = 0):</span></span>
<span><span class="co">#&gt; ---------------------</span></span>
<span><span class="co">#&gt; 1: S ~ N - I - R</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ---------------------</span></span>
<span><span class="co">#&gt; At every iteration of the simulation loop (t = 1 to T):</span></span>
<span><span class="co">#&gt; ---------------------</span></span>
<span><span class="co">#&gt; 1: mp_per_capita_flow(from = "S", to = "I", rate = "beta * I / N", </span></span>
<span><span class="co">#&gt;      flow_name = "infection")</span></span>
<span><span class="co">#&gt; 2: mp_per_capita_flow(from = "I", to = "R", rate = "gamma", flow_name = "recovery")</span></span></code></pre></div>
<p>To see how to actually generate simulations from this model see <a href="https://canmod.github.io/macpan2/articles/quickstart">this
article</a>. To use another model, again, replace <code>sir</code> with
another entry in the <code>dir</code> column above.</p>
</div>
<div class="section level2">
<h2 id="modifying-examples">Modifying Examples<a class="anchor" aria-label="anchor" href="#modifying-examples"></a>
</h2>
<p>To take <code>sir</code> as a jumping-off point for producing your
own model one may use the following code.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">my_sir_dir</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">"my_sir"</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/mp_model_starter.html">mp_model_starter</a></span><span class="op">(</span><span class="st">"sir"</span>, <span class="va">my_sir_dir</span><span class="op">)</span></span>
<span><span class="co">#&gt; ---------------------</span></span>
<span><span class="co">#&gt; Default values:</span></span>
<span><span class="co">#&gt;  quantity value</span></span>
<span><span class="co">#&gt;      beta   0.2</span></span>
<span><span class="co">#&gt;     gamma   0.1</span></span>
<span><span class="co">#&gt;         N 100.0</span></span>
<span><span class="co">#&gt;         I   1.0</span></span>
<span><span class="co">#&gt;         R   0.0</span></span>
<span><span class="co">#&gt; ---------------------</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ---------------------</span></span>
<span><span class="co">#&gt; Before the simulation loop (t = 0):</span></span>
<span><span class="co">#&gt; ---------------------</span></span>
<span><span class="co">#&gt; 1: S ~ N - I - R</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ---------------------</span></span>
<span><span class="co">#&gt; At every iteration of the simulation loop (t = 1 to T):</span></span>
<span><span class="co">#&gt; ---------------------</span></span>
<span><span class="co">#&gt; 1: mp_per_capita_flow(from = "S", to = "I", rate = "beta * I / N", </span></span>
<span><span class="co">#&gt;      flow_name = "infection")</span></span>
<span><span class="co">#&gt; 2: mp_per_capita_flow(from = "I", to = "R", rate = "gamma", flow_name = "recovery")</span></span></code></pre></div>
<p>After running this code you can go to the files in
<code>my_sir_dir</code> and modify what you see there. Note that you
typically want to chose a specific directory for your model instead of
using <code>tempdir</code>. You still need to read your own model in the
usual way.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">my_sir</span> <span class="op">=</span> <span class="fu"><a href="../reference/mp_tmb_library.html">mp_tmb_library</a></span><span class="op">(</span><span class="va">my_sir_dir</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/engine_functions.html">print</a></span><span class="op">(</span><span class="va">my_sir</span><span class="op">)</span></span>
<span><span class="co">#&gt; ---------------------</span></span>
<span><span class="co">#&gt; Default values:</span></span>
<span><span class="co">#&gt;  quantity value</span></span>
<span><span class="co">#&gt;      beta   0.2</span></span>
<span><span class="co">#&gt;     gamma   0.1</span></span>
<span><span class="co">#&gt;         N 100.0</span></span>
<span><span class="co">#&gt;         I   1.0</span></span>
<span><span class="co">#&gt;         R   0.0</span></span>
<span><span class="co">#&gt; ---------------------</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ---------------------</span></span>
<span><span class="co">#&gt; Before the simulation loop (t = 0):</span></span>
<span><span class="co">#&gt; ---------------------</span></span>
<span><span class="co">#&gt; 1: S ~ N - I - R</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ---------------------</span></span>
<span><span class="co">#&gt; At every iteration of the simulation loop (t = 1 to T):</span></span>
<span><span class="co">#&gt; ---------------------</span></span>
<span><span class="co">#&gt; 1: mp_per_capita_flow(from = "S", to = "I", rate = "beta * I / N", </span></span>
<span><span class="co">#&gt;      flow_name = "infection")</span></span>
<span><span class="co">#&gt; 2: mp_per_capita_flow(from = "I", to = "R", rate = "gamma", flow_name = "recovery")</span></span></code></pre></div>
<p>These look identical to what came before, but that’s just because it
hasn’t been modified … yet …</p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Steve Walker, Weiguang Guan, Jen Freeman, Ben Bolker, Darren Flynn-Primrose.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
